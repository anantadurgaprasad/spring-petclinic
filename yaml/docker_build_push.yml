
parameters:
  push: ""

steps: 
- task: Docker@2
  displayName: "acr_login"
  condition: succeeded()
  inputs:
    command: "login"
    containerRegistry: "azuredevopspracticacr-sc"
- task: Docker@2
  inputs:
    containerRegistry: "azuredevopspracticacr-sc"
    repository: "petclinic"
    command: 'buildAndPush'
    Dockerfile: 'Dockerfile'
    tag: '1.0.0' 
- task: Docker@2
  displayName: "acr_logout"
  condition: succeeded()
  inputs:
  command: "logout"
  containerRegistry: "azuredevopspracticacr-sc"

- script: docker images
  displayName: list Docker images